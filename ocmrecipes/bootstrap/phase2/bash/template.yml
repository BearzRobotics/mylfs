name: bash
version: 5.2.37
release: 1
url: https://ftp.gnu.org/gnu/bash/bash-5.2.37.tar.gz
homepage: https://www.gnu.org/software/bash/
license: GPL-3.0-or-later
summary: bash (sh-compatible shell)
description: |
  bash (sh-compatible shell) The GNU Bourne-Again SHell.  Bash is a sh-compatible command interpreter that executes commands read from the standard input or from a file.  Bash also incorporates useful features from the Korn and C shells (ksh and csh).  Bash is ultimately intended to be a conformant implementation of the IEEE Posix Shell and Tools specification (IEEE Working Group 1003.2). Bash must be present for the system to boot properly.
phase: 2
order: 19

buildsteps: |-
  export CC="clang"
  export CXX="clang++"
  export CFLAGS="-std=gnu89 --sysroot=$LFS -Wno-old-style-definition -static -I$LFS/usr/include -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700 -Wno-error=implicit-function-declaration"
  export LDFLAGS="--sysroot=$LFS -Wl,--dynamic-linker=/lib/ld-musl-x86_64.so.1"
  export PKG_CONFIG_SYSROOT_DIR="$LFS"
  export PKG_CONFIG_PATH="$LFS/usr/lib/pkgconfig:$LFS/usr/share/pkgconfig"  
  
  ./configure --prefix=$LFS/usr                      \
              --build=$(sh support/config.guess) \
              --without-bash-malloc              \
              bash_cv_strtold_broken=no 
              # --host=x86_64-linux-musl

  make
  make install
  cat >> $LFS/etc/shells << "EOF"
  /bin/bash
  EOF

  #ln -sfv bash $LFS/bin/sh
builddeps: []
